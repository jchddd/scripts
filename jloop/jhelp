#!/bin/bash
if [ $1 == 'jhelp' ];then
	echo "--- --- --- --- --- --- --- --- --- ---JHELP--- --- --- --- --- --- --- --- --- ---|"
	echo "Show help information for jloop scripts, e.g. jhelp jhelp                          |"
	echo "--- --- --- --- --- --- --- --- --- --- --- --- --- --- --- --- --- --- --- --- ---|"
elif [ $1 == 'put' ];then
	echo "--- --- --- --- --- --- --- --- --- --- PUT --- --- --- --- --- --- --- --- --- ---|"
	echo "Copy files stored in ~/xxx/jloop_path/files/ to current path. e.g. put k           |"
	echo "=->=->: Default Command --- --- --- --- --- --- --- --- --- --- --- --- --- --- ---|"
	echo " i  : cp INCAR to current direction.                                               |"
	echo " k  : cp KPOINTS to current direction.                                             |"
	echo "--- --- --- --- --- --- --- --- --- --- --- --- --- --- --- --- --- --- --- --- ---|"
elif [ $1 == 'sw' ];then
	echo "--- --- --- --- --- --- --- --- --- --- SW- --- --- --- --- --- --- --- --- --- ---|"
	echo "Quickly view and edit jloop scripts. e.g. sw, and then input a script name like put|"
	echo "=->=->: Default Command --- --- --- --- --- --- --- --- --- --- --- --- --- --- ---|"
	echo " -c : check all jloop script names                                                 |"
        echo "    : faster vim jloop scripts                                                     |"
	echo "--- --- --- --- --- --- --- --- --- --- --- --- --- --- --- --- --- --- --- --- ---|"
elif [ $1 == 'pre' ];then
	echo "--- --- --- --- --- --- --- --- --- --- PRE --- --- --- --- --- --- --- --- --- --- ---|"
	echo "Copy files to jloop_path/files, so that them can be called by put and runj scripts     |"
	echo "=->=->: Default Command --- --- --- --- --- --- --- --- --- --- --- --- --- --- --- ---|"
	echo " -c : check all files in jloop_path/files                                              |"
	echo " -v : vim a file in jloop_path/files. e.g. pre -v INCAR                                |"
	echo " -p : e.g. pre -p xx k yy Copy xx to jloop_path, modify put, then put k is available   |"
	echo "    : then put k is available to copy xx from jloop_path to current_path/yy            |"
	echo " -r : e.g. pre -r xx k  Copy xx to jloop_path, modify runj, then runj k is available   |"
	echo "--- --- --- --- --- --- --- --- --- --- --- --- --- --- --- --- --- --- --- --- --- ---|"
elif [ $1 == 'runj' ];then
	echo "--- --- --- --- --- --- --- --- --- --- RUNJ--- --- --- --- --- --- --- --- --- ---|"
	echo "Run jobs with submit scripts store in jloop_path/files and write a job record      |"
	echo "e.g. runj k  Use submit scripts corresponding to k to run, pre -r xx.sh k first    |"
	echo "--- --- --- --- --- --- --- --- --- --- --- --- --- --- --- --- --- --- --- --- ---|"
elif [ $1 == 'clog' ];then
	echo "--- --- --- --- --- --- --- --- --- --- CLOG--- --- --- --- --- --- --- --- --- ---|"
	echo "Check the run mission log                                                          |"
	echo "--- --- --- --- --- --- --- --- --- --- --- --- --- --- --- --- --- --- --- --- ---|"
elif [ $1 == 'jinsef' ];then
	echo "--- --- --- --- --- --- --- --- --- ---JINSEF-- --- --- --- --- --- --- --- --- ---|"
	echo "Detect change of energy and convergence if force in the process of ion steps       |"
	echo "--- --- --- --- --- --- --- --- --- --- --- --- --- --- --- --- --- --- --- --- ---|"
elif [ $1 == 'jgc' ];then
	echo "--- --- --- --- --- --- --- --- --- --- JGC --- --- --- --- --- --- --- --- --- --- --- ---|"
	echo "Grep VASP results. e.g. jgc energy  Grep total energy from OUTCAR                          |"
	echo "=->=->: Default Command --- --- --- --- --- --- --- --- --- --- --- --- --- --- --- --- ---|"
	echo "energy  : check total energy, grep 'energy  without' OUTCAR | tail -1                      |"
	echo "mag     : check magnetism, grep mag OSZICAR | tail -1                                      |"
	echo "fermi   : check fermi energy, grep E-fermi OUTCAR                                          |"
	echo "com     : check converge, grep 'reached required accuracy' OUTCAR                          |"
	echo "numberk : check k-point number, grep irre OUTCAR                                           |"
	echo "fre     : check frequency, grep meV OUTCAR                                                 |"
	echo "frei    : check imaginary frequency, grep 'f/i=' OUTCAR                                    |"
	echo "freni   : check frequency number, grep 'f  i=' OUTCAR                                      |"
	echo "pot     : check POTCAR information, grep TITEL+ENMAX POTCAR                                |"
	echo "fs      : check number of ion steps, grep 'd E' OSZICAR | tail -1                          |"
	echo "es      : check number of electron steps at the first ions step '1 F -B 2 OSZICAR | head -1|"
	echo "t       : check run time, grep Elapsed OUTCAR ; grep 'CPU time' OUTCAR                     |"
	echo "--- --- --- --- --- --- --- --- --- --- --- --- --- --- --- --- --- --- --- --- --- --- ---|"
elif [ $1 == 'jloop' ];then
	echo "--- --- --- --- --- --- --- --- --- --- --- ---JLOOP--- --- --- --- --- --- --- --- --- --- --- --- |"
	echo "=->=->: Filter Command- ---start with ls|cat--- --- --- --- --- --- --- --- --- --- --- --- --- --- |"
	echo "  g   : Filter Command += |grep opt                                                                 |"
	echo "  gv  : Filter Command += |grep -v opt                                                              |"
	echo "  t   : Filter Command += |tail -n opt                                                              |"
	echo "  h   : Filter Command += |head -n opt                                                              |"
	echo " cat  : Filter Command  = cat opt. This will reset the filter command.                              |"
	echo " dir  : Choose directions only.                                                                     |"
	echo " file : Choose files only.                                                                          |"
	echo " con  : Choose files with convergence VASP calculation.                                             |"
	echo " ncon : Choose files with not comveragence VASP calculation.                                        |"
	echo " jid  : Choose your submit job ids.                                                                 |"
	echo "=->=->: Batch Command 1 ---Without parameters and run directly- --- --- --- --- --- --- --- --- --- |"
	echo " count: Count how many objects this script grabs with current filter command.                       |"
	echo " name : Print names of objects this script grabs with current filter command.                       |"
	echo " del  : Delete directions or files this script grabs with current filter command.                   |"
	echo " mtd  : Move POSCAR files (like xx.vasp) to POSCAR and put in directions with their file names.     |"
	echo "      : And cp POSCAR to POSCARoo. Warn: files only.                                                |"
	echo " addc : Add convergence criterion into the last line of OUTCAR. Warn: dir only.                     |"
	echo " res  : Make a res direction and extract calculation results into it. Warn: dir only.               |"
	echo "      : res direction includes two directions: Output_files and Final_structures.                   |"
	echo "      : Output_files: POSCAR, POSCARoo, INCAR, KPOINTS, OSZICAR, output, ther_info, last 666 lines  |"
	echo "      : of OUTCAR for each jobs. Final_structures: CONTCAR rename as xxx.vasp.                      |"
	echo " rmel : Remove element symbols after the rows with atomic coordinate in pymatgen POSCAR. File only. |"
	echo " apot : Generate POTCAR with less electrons. POTCAR for each element can adjust on jloop script.    |"
	echo "=->=->: Batch Command 2 ---With one or more parameters- --- --- --- --- --- --- --- --- --- --- --- |"
	echo " run  : Enter each direction and run job with runj script. e.g.jloop run std54_48                   |"
	echo " put  : Use put script to prepare input files. e.g. put i,k                                         |"
	echo " jgc  : Use jgc script to check calculation results. e.g. jgc com,energy                            |"
	echo " oo   : Origin POSCAR(POSCARoo) relate commands. e.g. jloop oo c ,Warn: one parameter at a time.    |"
	echo "        c -> check if POSCARoo exists; m ->cp POSCAR POSCARoo; r ->cp POSCARoo POSCAR.              |"
	echo " vf   : File checking and dealing commands. e.g jloop vf i ,Warn: one parameter at a time.          |"
	echo "        i -> check if 4 VASP input files exist; r-> check if OSZICAR exists; c-> cp CONTCAR POSCAR  |"
	echo " vkit : Vaspkit relate commands. e.g jloop vkit p,m3                                                |"
	echo "        t -> draw thermodynamic correction information for adsorbents at 298.15K into ther_info.    |"
	echo "        p -> auto generate POTCAR;m6-m1 : generate K-mesh KPOINTS with x accurate.                  |"
	echo "        g6-g0 : generate G-mesh KPOINTS with x accurate. g0 -> single G-mesh KPOINTS.               |"
	echo " resz : Make a res direction and extract specified file into it.                                    |"
	echo "        e.g. resz POSCAR,OUTCAR,output  Warn: incompatible with jloop res.                          |"
	echo " adds : Add suffix into file/direction name. e.g. jloop adds .vasp                                  |"
	echo " cpf  : Copy specified file from directions with the same name in another path to current directions|"
	echo "        e.g. pwd: a(dir), ../cc/INCAR  exc: jloop cpf INCAR ../cc/  res: cp ../cc/a/INCAR a/INCAR   |"
	echo "        Warn: It is better to use exist to confirm all directions are existed in the another path.  |"
	echo " cont : Check the number of the specified file. e.g. cont xxx    res: xxx is the n file/dir         |"
	echo " exist: Check if a direction is existed in another path with the same name or not.                  |"
    echo "        e.g. pwd: a, b(dir/file)  exc: exist ../cc/  res: cc only have dir a, so print b not exists |"
	echo " cfee : Check if a file existed and is not empty on each directions. If not echo names of those dirs|"
    echo "        e.g. pwd: a/f b/a  exc: cfee f  res: b  Can only be used to direction objects.              |"
	echo " dsuf : Delete the last suffix in the object names divided by specified character. e.g. dsuf .      |"
	echo "  cp  : Copy files or directions to another path. e.g. cp ../xxxxxx/                                |"
	echo " sete : Set NELECT tag in INCAR. NELECT will be total electrons plus a specified value.             |"
	echo "        Warn: Standard jzhou INCAR should be used. e.g. 'sete 1' set NELECT to total electrons + 1  |"
	echo " cpt  : Copy a specified file in directions to another direction and rename it to the name of the   |"
	echo "        original directions. pwd: a/CONTCAR  exc: cpt CONTCAR cc/  res: cp a/CONTCAR cc/a.          |"
	echo " mtdz : Move files to a specified name and put in directions with their file names.                 |"
	echo "      : e.g. mtdz input  exc: mv files into input, and put them in directions with their names      |"
	echo " runp : Automatically monitors the number of tasks and submits tasks if task number is less than n  |"
	echo "      : e.g. runp 5 std54  exc: if your job number less than 5, enter each dir and submit std54 job |"
	echo "=->=->: Batch Command 3 ---With complex parameters or script modification-- --- --- --- --- --- --- |"
	echo " setm : Set mag tag in INCAR. Magnetic moment of each element can be modified inside jloop script   |"
	echo "        Warn: Standard jloop INCAR format should be used.                                           |"
	echo " setu : Set U tag in INCAR. U value of each element can be modified inside jloop script             |"
	echo "        Warn: Standard jloop INCAR format should be used, and set LMAXMIX manually.                 |"
	echo " sed  : Use sed command to switch character in specified file.                                      |"
	echo "        e.g. sed INCAR ';# LADU = T;  LADU = T;'                                                    |"
	echo " chgd : Auto duel chgdiff. Prepare 3 directions with sub_directions contain CHARCAR for slab, adsb  |"
	echo "        and both. Assum their names are slab, adsb and all. Add .slab and .adsb suffix on sub_dires |"
 	echo "        under slab and adsb. Enter all, excute chgd '|slab|adsb|'. CHGCAR_diffs dir will be maked.  |"
	echo ' zdy  : Enter each direction and execute commands. Use $i to represent the grep file/dir name.      |'
	echo '        e.g. zdy  exc: input the command you want in the input line like cd $i;cp xxxx;cd ..        |'
	echo "--- --- --- --- --- --- --- --- --- --- --- --- END --- --- --- --- --- --- --- --- --- --- --- --- |"
fi
